<div class="max-w-5xl mx-auto p-8 bg-white min-h-screen rounded-3xl shadow-lg">
  <h1 class="text-4xl font-bold mb-10 text-center text-indigo-700">
    {{ userName }}
  </h1>

  <div class="flex justify-center mb-6">
    <label for="statusFilter" class="mr-4 font-semibold text-indigo-700">Duruma göre filtrele:</label>
    <select
      id="statusFilter"
      [(ngModel)]="statusFilter"
      (change)="applyFilter()"
      class="border border-indigo-300 rounded px-3 py-1"
    >
      <option value="Hepsi">Hepsi</option>
      <option value="Open">Açık</option>
      <option value="Inprogress">Devam Ediyor</option>
      <option value="Closed">Kapalı</option>
    </select>
  </div>

  <div class="flex justify-center mb-10">
    <a routerLink="/client/create-ticket">
      <button
        class="bg-indigo-600 hover:bg-indigo-700 active:bg-indigo-800 text-white font-semibold px-10 py-3 rounded-full shadow"
        aria-label="Yeni Ticket Oluştur"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="inline-block h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
        </svg>
        Yeni Ticket Oluştur
      </button>
    </a>
  </div>

  <div *ngIf="loading" class="text-center text-gray-400 italic select-none">
    Yükleniyor...
  </div>

  <div *ngIf="errorMessage" class="text-center text-red-600 font-semibold mb-6">
    {{ errorMessage }}
  </div>

  <div *ngIf="!loading && filteredTickets.length === 0" class="text-center text-gray-500 italic">
    Henüz ticket yok.
  </div>

  <div *ngIf="filteredTickets.length > 0" class="space-y-6">
    <a
      *ngFor="let ticket of filteredTickets"
      [routerLink]="['/client/ticket-detail', ticket.id]"
      tabindex="0"
      role="article"
      [attr.aria-label]="'Ticket ' + ticket.title"
      class="block p-6 border border-gray-200 rounded-lg hover:shadow-md transition-shadow duration-200 no-underline text-gray-900"
    >
      <h3 class="text-2xl font-semibold mb-2 truncate" [attr.title]="ticket.title">{{ ticket.title }}</h3>

      <p class="mb-4 text-gray-700 line-clamp-3">{{ ticket.description }}</p>

      <div class="flex justify-between items-center text-sm text-gray-600">
        <span
          class="inline-block px-3 py-1 rounded-full text-white font-semibold uppercase tracking-wide text-xs"
          [ngClass]="{
            'bg-green-600': ticket.status === 'Open',
            'bg-yellow-500': ticket.status === 'InProgress',
            'bg-red-600': ticket.status === 'Closed',
            'bg-gray-400': ticket.status !== 'Open' && ticket.status !== 'InProgress' && ticket.status !== 'Closed'
          }"
        >
          {{ ticket.status === 'Open' ? 'Açık' : (ticket.status === 'Inprogress' ? 'Devam Ediyor' : (ticket.status === 'Closed' ? 'Kapalı' : ticket.status)) }}
        </span>

        <time [attr.datetime]="ticket.createdAt" class="text-gray-500">
          {{ ticket.createdAt | date: 'mediumDate' }}
        </time>
      </div>
    </a>
  </div>
</div>
